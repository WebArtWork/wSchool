import{a as w}from"./chunk-3XLUGM2L.js";import"./chunk-JRAEII2A.js";import"./chunk-2IXD5A4M.js";import"./chunk-D6KJIOZP.js";import"./chunk-A26GYWKC.js";import"./chunk-SMMVKXXX.js";import{b as n}from"./chunk-K5ATWWWY.js";import{d as b}from"./chunk-CZLGUVAL.js";import"./chunk-2YGQTJPJ.js";import{a as x}from"./chunk-MUJBVTFU.js";import{a as C}from"./chunk-2H4XP5XP.js";import{j as I,k as g,q as S}from"./chunk-6F3JZZEN.js";import{$ as d,A as u,Db as _,Kb as y,Z as s,aa as f,pa as p,sa as v,z as m}from"./chunk-QGRJSNEC.js";var j={formId:"schoolcertificate",title:"Schoolcertificate",components:[{name:"Text",key:"title",focused:!0,fields:[{name:"Placeholder",value:"fill certificates title"},{name:"Label",value:"Title"}]},{name:"Date",key:"received",fields:[{name:"Placeholder",value:"set receiving date"},{name:"Label",value:"Received"}]},{name:"Number",key:"grade",fields:[{name:"Placeholder",value:"set certificates grade"},{name:"Label",value:"Grade"}]},{name:"Date",key:"expired",fields:[{name:"Placeholder",value:"set expiration date"},{name:"Label",value:"Expired"}]},{name:"Select",key:"status",fields:[{name:"Items",value:["Pending","Received","Expired"]},{name:"Placeholder",value:"choose certificates status"},{name:"Label",value:"Status"},{name:"Multiple",value:!1}]}]};var k=(()=>{let e=class e extends S{constructor(){super({name:"schoolcertificate",replace:t=>{t.authorstatus=t.author+t.status}}),this.schoolcertificates=this.getDocs(),this.schoolcertificatesByModuleId={},this.schoolcertificatesByAuthorstatus={},this.get(),this.filteredDocuments(this.schoolcertificatesByModuleId,"moduleId"),this.filteredDocuments(this.schoolcertificatesByAuthorstatus,"authorstatus")}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=m({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();var l=(()=>{let e=class e{get hasAccess(){return this._us.role("admin")||this._us.role("schoolowner")||this._us.role("schoolteacher")}get rows(){return this.moduleId?this._schoolcertificateService.schoolcertificatesByModuleId[this.moduleId]:this._schoolcertificateService.schoolcertificates}constructor(t,o,i,c,h,M,D){this._translate=t,this._schoolcertificateService=o,this._alert=i,this._form=c,this._core=h,this._router=M,this._us=D,this.columns=["title","received","grade","expired","status"],this.moduleType=this._router.url.includes("/certificates/")?this._router.url.split("/")[this._router.url.split("/").length-2]:"",this.moduleId=this._router.url.includes("/certificates/")?this._router.url.split("/")[this._router.url.split("/").length-1]:"",this.form=this._form.getForm("schoolcertificate",j),this.config={update:a=>{this._form.modal(this.form,[],a).then(F=>{this._core.copy(F,a),this._schoolcertificateService.update(a)})},delete:a=>{this._alert.question({text:this._translate.translate("Common.Are you sure you want to delete this certificate?"),buttons:[{text:this._translate.translate("Common.No")},{text:this._translate.translate("Common.Yes"),callback:()=>{this._schoolcertificateService.delete(a)}}]})},buttons:[this.hasAccess?{icon:"cloud_download",click:a=>{this._form.modalUnique("schoolcertificate","url",a)}}:null]}}_bulkManagement(t=!0){return()=>{this._form.modalDocs(t?[]:this.rows).then(o=>{if(t)for(let i of o)this._preCreate(i),this._schoolcertificateService.create(i);else{for(let i of this.rows)o.find(c=>c._id===i._id)||this._schoolcertificateService.delete(i);for(let i of o){let c=this.rows.find(h=>h._id===i._id);c?(this._core.copy(i,c),this._schoolcertificateService.update(c)):(this._preCreate(i),this._schoolcertificateService.create(i))}}})}}_preCreate(t){delete t.__created,this.moduleType&&(t.moduleType=this.moduleType),this.moduleId&&(t.moduleId=this.moduleId)}};e.\u0275fac=function(o){return new(o||e)(s(C),s(k),s(I),s(b),s(g),s(_),s(x))},e.\u0275cmp=d({type:e,selectors:[["ng-component"]],standalone:!1,decls:1,vars:3,consts:[["title","Certificates",3,"columns","config","rows"]],template:function(o,i){o&1&&v(0,"wtable",0),o&2&&p("columns",i.columns)("config",i.config)("rows",i.rows)},dependencies:[n],encapsulation:2});let r=e;return r})();var P=[{path:"",component:l},{path:"course/:schoolcertificate",component:l},{path:"test/:schoolcertificate",component:l},{path:"school/:school",component:l}],Q=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=f({type:e}),e.\u0275inj=u({imports:[y.forChild(P),w,n]});let r=e;return r})();export{Q as CertificatesModule};
